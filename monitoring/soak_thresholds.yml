# DEC-032: Nightly soak regression thresholds.
# Used by scripts/check_soak_thresholds.py to gate CI.

baseline:
  # No events should be dropped under normal load
  events_dropped_max: 0
  snapshots_dropped_max: 0
  # Queue depth should stay well below cap (10,000)
  max_event_queue_depth: 2000
  max_snapshot_queue_depth: 500
  # RSS should stay reasonable
  max_rss_mb: 200
  # Tick drift under normal load (includes startup jitter)
  max_tick_drift_ms: 2000
  # Reconnect rate per shard (DEC-027 acceptance: <= 6.0)
  max_reconnect_rate_per_min: 6.0

overload:
  # Under overload, drops may occur (backpressure engaged).
  # Set to 0 to avoid false failures in short/moderate runs.
  events_dropped_min: 0
  # Queue depth should stay at cap, not exceed it
  max_event_queue_depth: 10000
  max_snapshot_queue_depth: 1000
  # RSS under overload
  max_rss_mb: 300
  # Tick drift more lenient under overload
  max_tick_drift_ms: 1000
  # Reconnect rate still bounded
  max_reconnect_rate_per_min: 6.0
